import { MemoryVFS } from '@livestore/wa-sqlite/src/examples/MemoryVFS.js';
let cachedMemoryVfs;
export const makeInMemoryDb = (sqlite3) => {
    if (sqlite3.vfs_registered.has('memory-vfs') === false) {
        // @ts-expect-error TODO fix types
        const vfs = new MemoryVFS('memory-vfs', sqlite3.module);
        // @ts-expect-error TODO fix types
        sqlite3.vfs_register(vfs, false);
        cachedMemoryVfs = vfs;
    }
    const dbPointer = sqlite3.open_v2Sync(':memory:', undefined, 'memory-vfs');
    const vfs = cachedMemoryVfs;
    return { dbPointer, vfs };
};
//# sourceMappingURL=in-memory-vfs.js.map