!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports["easy-web-worker"]=r():e["easy-web-worker"]=r()}(this,(()=>(()=>{"use strict";var e={600:(e,r)=>{function o(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var o=0,t=Array(r);o<r;o++)t[o]=e[o];return t}Object.defineProperty(r,"__esModule",{value:!0}),r.StaticEasyWebWorker=void 0,r.StaticEasyWebWorker=function(e){var r=function(){var e=new Map,r=new Map([["",function(){throw"you didn't defined a message-callback, please assign a callback by calling easyWorker.onMessage"}]]);self.onmessage=function(o){var t,n,a,s,i=null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.messageId,c=null!==(a=null===(n=null==o?void 0:o.data)||void 0===n?void 0:n.__is_easy_web_worker_message__)&&void 0!==a&&a;if(i&&c)try{var l=o.data.cancelation;if(l){var d=l.reason;return void e.get(i).cancel(d)}var u=o.data,g=u.method,f=function(r){var o=r.messageId,t=r.payload,n=r.method,a="pending",s=new Map,i=function(r,t){var i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=a,d="progress"===r?"pending":r;if(e.has(o)){var u={resolved:"onResolve",rejected:"onReject",canceled:"onCancel",worker_cancelation:"onCancel",pending:"onProgress"}[d],g=s.get(u),f=!t.progress;try{null==g||g.forEach((function(e){return e(t,c)})),f&&(null===(i=s.get("onFinalize"))||void 0===i||i.forEach((function(e){return e(t,c)})))}catch(n){throw e.delete(o),{message:"Error while processing message id: "+o,error:n,messageData:t,messageType:r,when:u}}finally{f&&e.delete(o)}self.postMessage(Object.assign({messageId:o},t),c),a=d}else{var p="%c#"+o+" Message Not Found: %cThis means that the message was already resolved | rejected | canceled. To avoid this error, please make sure that you are not resolving | rejecting | canceling the same message twice. Also make sure that you are not reporting progress after the message was processed. Remember each message can handle his one cancelation by adding a handler with the %cmessage.onCancel%c method. To now more about this method, please check the documentation at: %chttps://www.npmjs.com/package/easy-web-worker#ieasywebworkermessageipayload--null-iresult--void %cTrying to process message:";console.error(p,"color: darkorange; font-size: 12px; font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;","color: lightblue; font-size: 10px; font-weight: bold;","font-weight: bold; color: darkorange;",{messageId:o,status:{current:l,target:d},method:n,action:t})}},c=function(e){return function(r){s.has(e)||s.set(e,new Set);var o=s.get(e);return o.add(r),function(){return o.delete(r)}}};return{messageId:o,method:n,payload:t,getStatus:function(){return a},isPending:function(){return"pending"===a},resolve:function(e){return i("resolved",{resolved:{payload:void 0===e?[]:[e]}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])},reject:function(e){i("rejected",{rejected:{reason:e}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])},cancel:function(e){return i("worker_cancelation",{worker_cancelation:{reason:e}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])},reportProgress:function(e,r){i("progress",{progress:{percentage:e,payload:r}},arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])},onResolve:c("onResolve"),onReject:c("onReject"),onCancel:c("onCancel"),onProgress:c("onProgress"),onFinalize:c("onFinalize")}}({method:g,messageId:i,payload:u.execution.payload});e.set(i,f),r.get(g||"")(f,o)}catch(r){throw e.delete(null===(s=o.data)||void 0===s?void 0:s.messageId),{message:"Error while processing message id: "+i,event:o}}};return{onMessage:function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];var n=o[0],a=o[1];if("string"==typeof n){var s=n,i=a;r.set(s,i)}else{var c=n;r.set("",c)}},close:function(){o(e.values()).forEach((function(e){return e.reject(new Error("worker closed"))})),self.close()},importScripts:function(){var e;(e=self).importScripts.apply(e,arguments)}}}(),t=r.close,n=r.onMessage,a=r.importScripts;this.close=t,this.onMessage=n,this.importScripts=a,e&&n(e)}}},r={};function o(t){var n=r[t];if(void 0!==n)return n.exports;var a=r[t]={exports:{}};return e[t](a,a.exports,o),a.exports}var t={};return(()=>{var e=t;Object.defineProperty(e,"__esModule",{value:!0}),e.createStaticEasyWebWorker=void 0;var r=o(600);e.createStaticEasyWebWorker=function(e){return new r.StaticEasyWebWorker(e)}})(),t})()));